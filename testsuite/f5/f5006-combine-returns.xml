<Test>
	<Flags>--emit-ir-post=retcomb</Flags>

	<TestFlags>
		<TestFlag name="regex" value="false"></TestFlag>
	</TestFlags>

	<ExpectedOutput>

function a(%0:i32): i32 {
.0:
	stack_alloc [i32 x 1], %1:ptr
	stack_alloc [i32 x 1], %2:ptr
	store %0:i32, %2:ptr
	load %2:ptr, %3:i32
	icmp_gt %3:i32, 3:i32, %4:i32
	cbr .1, .2, %4:i32
.1:
	load %2:ptr, %5:i32
	icmp_gte %5:i32, 5:i32, %6:i32
	cbr .3, .4, %6:i32
.3:
	store 30:i32, %1:ptr
	br .5
.4:
	store 10:i32, %1:ptr
	br .5
.2:
	stack_alloc [i32 x 1], %7:ptr
	store 5:i32, %7:ptr
	br .6
.6:
	load %7:ptr, %8:i32
	icmp_gt %8:i32, 0:i32, %9:i32
	cbr .7, .8, %9:i32
.7:
	load %7:ptr, %10:i32
	isub %10:i32, 1:i32, %11:i32
	store %11:i32, %7:ptr
	load %7:ptr, %12:i32
	icmp_eq %12:i32, 2:i32, %13:i32
	cbr .9, .10, %13:i32
.9:
	store 50:i32, %1:ptr
	br .5
.10:
	br .6
.8:
	load %7:ptr, %14:i32
	store %14:i32, %1:ptr
	br .5
.5:
	load %1:ptr, %15:i32
	ret %15:i32
}
function test(): i32 {
.0:
	stack_alloc [i32 x 1], %0:ptr
	store 10:i32, %0:ptr
	br .1
.1:
	load %0:ptr, %1:i32
	ret %1:i32
}
	</ExpectedOutput>
</Test>