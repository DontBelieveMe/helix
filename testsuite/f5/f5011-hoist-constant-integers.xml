<Test>
	<Flags>--emit-ir-post=consthoist</Flags>

	<TestFlags>
		<TestFlag name="regex" value="false"></TestFlag>
	</TestFlags>

	<ExpectedOutput>
@ci0:ptr = global i32 120:i32
@ci1:ptr = global i8 4:i8
@ci2:ptr = global i32 10:i32
@ci3:ptr = global i32 20:i32

function f1(): i32 {
.0:
	stack_alloc [i32 x 1], %0:ptr
	load @ci0:ptr, %1:i32
	store %1:i32, %0:ptr
	br .1
.1:
	load %0:ptr, %2:i32
	ret %2:i32
}
function f2(): i8 {
.0:
	stack_alloc [i8 x 1], %0:ptr
	load @ci1:ptr, %1:i8
	store %1:i8, %0:ptr
	br .1
.1:
	load %0:ptr, %2:i8
	ret %2:i8
}
function f3(): i32 {
.0:
	stack_alloc [i32 x 1], %0:ptr
	load @ci2:ptr, %1:i32
	load @ci3:ptr, %2:i32
	iadd %1:i32, %2:i32, %3:i32
	store %3:i32, %0:ptr
	br .1
.1:
	load %0:ptr, %4:i32
	ret %4:i32
}
function f4(): i32 {
.0:
	stack_alloc [i32 x 1], %0:ptr
	load @ci0:ptr, %1:i32
	store %1:i32, %0:ptr
	br .1
.1:
	load %0:ptr, %2:i32
	ret %2:i32
}
	</ExpectedOutput>
</Test>